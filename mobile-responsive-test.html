<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Responsive MagicMirror Test</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/custom.css">
    <style>
        .test-controls {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.95);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 11px;
            z-index: 10000;
            border: 2px solid #00ff00;
            max-width: 250px;
        }
        
        .test-button {
            margin: 3px;
            padding: 6px 10px;
            background: #0096ff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 10px;
            width: 100%;
        }
        
        .test-button:hover {
            background: #0080dd;
        }
        
        .screen-info {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 10px;
            z-index: 10000;
            max-width: 250px;
        }
        
        .demo-container {
            width: 100%;
            height: 100vh;
            transition: all 0.5s ease;
            transform-origin: top left;
            position: relative;
            overflow: hidden;
        }
        
        /* Test different screen sizes */
        .mobile-small {
            width: 320px;
            height: 568px;
            transform: scale(0.8);
            border: 3px solid #ff6b6b;
            margin: 20px;
            background: #000;
        }
        
        .mobile-medium {
            width: 375px;
            height: 667px;
            transform: scale(0.7);
            border: 3px solid #ffa500;
            margin: 20px;
            background: #000;
        }
        
        .mobile-large {
            width: 414px;
            height: 896px;
            transform: scale(0.6);
            border: 3px solid #ffff00;
            margin: 20px;
            background: #000;
        }
        
        .tablet-portrait {
            width: 768px;
            height: 1024px;
            transform: scale(0.5);
            border: 3px solid #4ecdc4;
            margin: 20px;
            background: #000;
        }
        
        .tablet-landscape {
            width: 1024px;
            height: 768px;
            transform: scale(0.4);
            border: 3px solid #45b7d1;
            margin: 20px;
            background: #000;
        }
        
        .desktop {
            width: 1920px;
            height: 1080px;
            transform: scale(0.3);
            border: 3px solid #96ceb4;
            margin: 20px;
            background: #000;
        }
        
        .fullscreen {
            width: 100%;
            height: 100vh;
            transform: scale(1);
            border: none;
            margin: 0;
            background: #000;
        }
        
        .overlap-indicator {
            position: absolute;
            background: rgba(255, 0, 0, 0.3);
            border: 2px solid red;
            z-index: 9999;
            pointer-events: none;
            display: none;
        }
    </style>
</head>
<body>
    <div class="test-controls">
        <h4>üì± Mobile Responsive Test</h4>
        <button class="test-button" onclick="setView('mobile-small')">üì± Mobile S (320px)</button>
        <button class="test-button" onclick="setView('mobile-medium')">üì± Mobile M (375px)</button>
        <button class="test-button" onclick="setView('mobile-large')">üì± Mobile L (414px)</button>
        <button class="test-button" onclick="setView('tablet-portrait')">üì± Tablet P (768px)</button>
        <button class="test-button" onclick="setView('tablet-landscape')">üì± Tablet L (1024px)</button>
        <button class="test-button" onclick="setView('desktop')">üñ•Ô∏è Desktop (1920px)</button>
        <button class="test-button" onclick="setView('fullscreen')">üñºÔ∏è Fullscreen</button>
        <hr style="margin: 10px 0; border-color: #333;">
        <button class="test-button" onclick="checkOverlaps()">üîç Check Overlaps</button>
        <button class="test-button" onclick="toggleInfo()">‚ÑπÔ∏è Toggle Info</button>
        <button class="test-button" onclick="measureElements()">üìè Measure</button>
    </div>
    
    <div class="screen-info" id="screenInfo">
        <div id="screenData">Loading...</div>
    </div>
    
    <div class="demo-container fullscreen" id="demoContainer">
        <!-- Simulated MagicMirror Layout -->
        
        <!-- Clock - Top Center -->
        <div class="region top center">
            <div class="module clock">
                <div class="time">14:30</div>
                <div class="date">Friday, December 15th 2023</div>
            </div>
        </div>
        
        <!-- Location - Upper Third -->
        <div class="region upper third">
            <div class="module MMM-SimpleLocation">
                üìç New York, USA
            </div>
        </div>
        
        <!-- Calendar - Left Side -->
        <div class="region top left">
            <div class="module calendar">
                <header class="module-header">My Calendar</header>
                <div class="event">
                    <div class="symbol">üìÖ</div>
                    <div class="title">Team Meeting with Development Team</div>
                    <div class="time">15:00</div>
                </div>
                <div class="event">
                    <div class="symbol">üéÇ</div>
                    <div class="title">Birthday Party at Central Park</div>
                    <div class="time">18:00</div>
                </div>
                <div class="event">
                    <div class="symbol">‚úàÔ∏è</div>
                    <div class="title">Flight to London Heathrow</div>
                    <div class="time">Tomorrow 09:00</div>
                </div>
                <div class="event">
                    <div class="symbol">üè•</div>
                    <div class="title">Doctor Appointment</div>
                    <div class="time">Monday 14:30</div>
                </div>
            </div>
        </div>
        
        <!-- Weather - Right Side -->
        <div class="region top right">
            <div class="module weather">
                <header class="module-header">Current Weather</header>
                <div class="weathericon">‚òÄÔ∏è</div>
                <div class="temperature">24¬∞C</div>
                <div class="description">Sunny and Clear</div>
                <div class="humidity">Humidity: 65%</div>
                <div class="wind">Wind: 12 km/h NE</div>
                <div class="feelslike">Feels like 26¬∞C</div>
            </div>
        </div>
        
        <!-- Image Slideshow - Bottom Left -->
        <div class="region bottom left">
            <div class="module MMM-ImageSlideshow">
                <img src="modules/MMM-ImageSlideshow/exampleImages/matrix.jpg" alt="Sample Image" style="width: 100%; height: auto; aspect-ratio: 3/2; object-fit: cover; border-radius: 0.8rem;">
            </div>
        </div>
        
        <!-- Voice Control - Bottom Right -->
        <div class="region bottom right">
            <div class="module MMM-WSLVoice">
                üé§ Voice Control Ready
                <br>Say "Hey Mirror"
            </div>
        </div>
        
        <!-- Compliments - Bottom Center -->
        <div class="region bottom center">
            <div class="module compliments">
                Looking sharp today! Ready to conquer the day and make it amazing?
            </div>
        </div>
        
        <!-- News - Bottom Bar -->
        <div class="region bottom bar">
            <div class="module newsfeed">
                <div class="newsfeed-title">
                    üåç Breaking: Revolutionary responsive CSS technology makes MagicMirror displays perfectly adapt to any screen size without overlapping issues...
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let currentView = 'fullscreen';
        
        function setView(viewType) {
            const container = document.getElementById('demoContainer');
            container.className = `demo-container ${viewType}`;
            currentView = viewType;
            updateScreenInfo();
            
            // Clear any overlap indicators
            document.querySelectorAll('.overlap-indicator').forEach(el => el.remove());
        }
        
        function updateScreenInfo() {
            const container = document.getElementById('demoContainer');
            const rect = container.getBoundingClientRect();
            const screenData = document.getElementById('screenData');
            
            screenData.innerHTML = `
                <strong>üì± ${currentView.toUpperCase()}</strong><br>
                Window: ${window.innerWidth} √ó ${window.innerHeight}px<br>
                Container: ${Math.round(rect.width)} √ó ${Math.round(rect.height)}px<br>
                Scale: ${getComputedStyle(container).transform}<br>
                <br>
                <strong>Font Sizes (clamp):</strong><br>
                Clock: ${getComputedStyle(document.querySelector('.clock .time')).fontSize}<br>
                News: ${getComputedStyle(document.querySelector('.newsfeed-title')).fontSize}<br>
                Calendar: ${getComputedStyle(document.querySelector('.calendar .title')).fontSize}<br>
                <br>
                <strong>Layout Check:</strong><br>
                <span id="overlapStatus">‚úÖ No overlaps detected</span>
            `;
        }
        
        function checkOverlaps() {
            const regions = document.querySelectorAll('.region');
            const overlaps = [];
            
            // Clear previous indicators
            document.querySelectorAll('.overlap-indicator').forEach(el => el.remove());
            
            for (let i = 0; i < regions.length; i++) {
                for (let j = i + 1; j < regions.length; j++) {
                    const rect1 = regions[i].getBoundingClientRect();
                    const rect2 = regions[j].getBoundingClientRect();
                    
                    // Check for overlap
                    if (!(rect1.right < rect2.left || 
                          rect2.right < rect1.left || 
                          rect1.bottom < rect2.top || 
                          rect2.bottom < rect1.top)) {
                        
                        overlaps.push({
                            element1: regions[i].className,
                            element2: regions[j].className,
                            rect1: rect1,
                            rect2: rect2
                        });
                        
                        // Create visual indicator
                        const indicator = document.createElement('div');
                        indicator.className = 'overlap-indicator';
                        indicator.style.left = Math.max(rect1.left, rect2.left) + 'px';
                        indicator.style.top = Math.max(rect1.top, rect2.top) + 'px';
                        indicator.style.width = (Math.min(rect1.right, rect2.right) - Math.max(rect1.left, rect2.left)) + 'px';
                        indicator.style.height = (Math.min(rect1.bottom, rect2.bottom) - Math.max(rect1.top, rect2.top)) + 'px';
                        indicator.style.display = 'block';
                        document.body.appendChild(indicator);
                    }
                }
            }
            
            const statusElement = document.getElementById('overlapStatus');
            if (overlaps.length > 0) {
                statusElement.innerHTML = `‚ùå ${overlaps.length} overlap(s) found`;
                statusElement.style.color = '#ff6b6b';
                console.log('Overlaps detected:', overlaps);
            } else {
                statusElement.innerHTML = '‚úÖ No overlaps detected';
                statusElement.style.color = '#4ecdc4';
            }
        }
        
        function toggleInfo() {
            const info = document.getElementById('screenInfo');
            info.style.display = info.style.display === 'none' ? 'block' : 'none';
        }
        
        function measureElements() {
            const elements = [
                { name: 'Clock', selector: '.clock .time' },
                { name: 'Location', selector: '.MMM-SimpleLocation' },
                { name: 'Calendar', selector: '.calendar' },
                { name: 'Weather', selector: '.weather' },
                { name: 'Image', selector: '.MMM-ImageSlideshow' },
                { name: 'Compliments', selector: '.compliments' },
                { name: 'News', selector: '.newsfeed' }
            ];
            
            let measurements = `üìè Element Measurements (${currentView}):\n\n`;
            elements.forEach(el => {
                const element = document.querySelector(el.selector);
                if (element) {
                    const rect = element.getBoundingClientRect();
                    const style = getComputedStyle(element);
                    measurements += `${el.name}:\n`;
                    measurements += `  Size: ${Math.round(rect.width)}√ó${Math.round(rect.height)}px\n`;
                    measurements += `  Position: ${Math.round(rect.left)}, ${Math.round(rect.top)}\n`;
                    measurements += `  Font: ${style.fontSize}\n\n`;
                }
            });
            
            alert(measurements);
        }
        
        // Initialize
        window.addEventListener('load', () => {
            updateScreenInfo();
            setTimeout(checkOverlaps, 1000);
        });
        
        window.addEventListener('resize', () => {
            updateScreenInfo();
            setTimeout(checkOverlaps, 500);
        });
        
        // Auto-update every 3 seconds
        setInterval(() => {
            updateScreenInfo();
        }, 3000);
        
        console.log('üì± Mobile Responsive MagicMirror Test Environment');
        console.log('üéØ Test different screen sizes and check for overlaps');
        console.log('üìè All measurements use clamp() for smooth responsive scaling');
        console.log('‚úÖ Layout should maintain structure without overlapping');
    </script>
</body>
</html>
